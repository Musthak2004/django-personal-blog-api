{% extends "base.html" %}
<!--                     -->

{% block title %}Blogs{% endblock title %}
<!--                -->

{% block content %}
<div class="max-w-5xl mx-auto py-10 px-4 space-y-8">
  <!-- Header -->
  <div class="flex justify-between items-center">
    <h2 class="text-2xl font-semibold text-gray-800">üì∞ Blogs</h2>
    <a
      href="{% url 'post_create' %}"
      class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600"
    >
      + New Post
    </a>
  </div>

  <!-- Blog Cards -->
  {% for post in post_list %}
  <div
    class="bg-white shadow-md rounded p-6 space-y-4 hover:shadow-lg transition"
  >
    <!-- Title -->
    <h3 class="text-xl font-semibold text-gray-800">
      <a href="{% url 'post_detail' post.pk %}" class="hover:text-blue-600">
        {{ post.title }}
      </a>
    </h3>

    <!-- Meta -->
    <p class="text-sm text-gray-500">
      by {{ post.author }} ¬∑ {{ post.created_at|date:"d M Y" }}
    </p>

    <!-- Cover image -->
    {% if post.cover_image %}
    <img
      src="{{ post.cover_image.url }}"
      alt="{{ post.title }}"
      class="w-full max-h-60 object-cover rounded"
    />
    {% endif %}

    <!-- Content preview -->
    <p class="text-gray-700">{{ post.content|truncatechars:150 }}</p>

    <!-- Tags -->
    {% if post.tags.all %}
    <div class="flex flex-wrap gap-2">
      {% for tag in post.tags.all %}
      <a
        href="{% url 'post_list' %}?tag={{ tag.slug }}"
        class="px-2 py-1 bg-gray-200 text-sm rounded hover:bg-gray-300"
      >
        {{ tag.name }}
      </a>
      {% endfor %}
    </div>
    {% endif %}

    <!-- Likes -->
    <p class="text-sm text-gray-500">‚ù§Ô∏è {{ post.likes.count }} Likes</p>

    <!-- Actions -->
    <div class="flex space-x-4 text-sm">
      <a
        href="{% url 'post_detail' post.pk %}"
        class="text-blue-600 hover:underline"
      >
        Read more ‚Üí
      </a>

      {% if user == post.author %}
      <a
        href="{% url 'post_update' post.pk %}"
        class="text-green-600 hover:underline"
      >
        Edit
      </a>
      <a
        href="{% url 'post_delete' post.pk %}"
        class="text-red-600 hover:underline"
      >
        Delete
      </a>
      {% endif %}
    </div>
  </div>
  {% empty %}
  <p class="text-gray-600">No blog posts yet.</p>
  {% endfor %}
</div>
{% endblock content %}
